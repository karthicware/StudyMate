<!-- Split Layout Container -->
<div class="min-h-screen flex bg-gray-50">

  <!-- Left: Hero Section (Desktop only) -->
  <div class="hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary-400 to-primary-600 relative overflow-hidden">
    <div class="flex flex-col items-center justify-center p-12 z-10 relative">
      <!-- Logo/Branding -->
      <div class="mb-8">
        <svg class="w-20 h-20 text-white" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5zm0 18c-3.87-1.06-7-5.53-7-10V8.69l7-3.5 7 3.5V10c0 4.47-3.13 8.94-7 10z"/>
        </svg>
      </div>

      <!-- Hero Text -->
      <h1 class="text-4xl font-bold text-white mb-4 text-center font-heading">Join StudyMate</h1>
      <p class="text-lg text-white/90 text-center max-w-md mb-8 font-body">
        List your study spaces and connect with students seeking the perfect place to learn.
      </p>

      <!-- Features List -->
      <div class="space-y-4 text-white/90">
        <div class="flex items-center gap-3">
          <svg class="w-6 h-6 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
          </svg>
          <span>Easy listing management</span>
        </div>
        <div class="flex items-center gap-3">
          <svg class="w-6 h-6 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
          </svg>
          <span>Secure payment processing</span>
        </div>
        <div class="flex items-center gap-3">
          <svg class="w-6 h-6 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
          </svg>
          <span>Real-time booking notifications</span>
        </div>
      </div>
    </div>

    <!-- Decorative gradient overlay -->
    <div class="absolute inset-0 bg-gradient-to-t from-primary-900/20 to-transparent"></div>
  </div>

  <!-- Right: Form Container -->
  <div class="w-full lg:w-1/2 flex items-center justify-center p-6 lg:p-12">
    <div class="max-w-md w-full bg-white rounded-xl shadow-card p-8">
      <h2 class="text-3xl font-bold text-gray-900 mb-2 text-center font-heading">Create Owner Account</h2>
      <p class="text-sm text-gray-500 mb-8 text-center font-body">Start listing your study spaces today</p>

      <!-- Success Message -->
      @if (successMessage()) {
        <div class="mb-6 bg-success-500/10 border-0 text-success-700 px-4 py-3 rounded-lg animate-slide-down" role="alert" data-testid="success-message">
          <div class="flex items-center gap-3">
            <svg class="w-5 h-5 text-success-500 flex-shrink-0 animate-scale-in" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
            <p class="font-medium text-sm">{{ successMessage() }}</p>
          </div>
        </div>
      }

      <!-- Error Message -->
      @if (errorMessage()) {
        <div class="mb-6 bg-danger-500/10 border-0 text-danger-700 px-4 py-3 rounded-lg animate-fade-in" role="alert" data-testid="error-message">
          <div class="flex items-center gap-3">
            <svg class="w-5 h-5 text-danger-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <p class="font-medium text-sm">{{ errorMessage() }}</p>
          </div>
        </div>
      }

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" novalidate>
        <!-- First Name -->
        <div class="mb-5">
          <label for="firstName" class="block text-sm font-medium text-gray-700 mb-2 font-body">
            First Name <span class="text-danger-500">*</span>
          </label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
              </svg>
            </div>
            <input
              id="firstName"
              type="text"
              formControlName="firstName"
              class="w-full pl-10 pr-4 py-3 border-0 bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-300 focus:bg-white transition-all duration-200 font-body"
              [class.error-shake]="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched"
              [class.ring-2]="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched"
              [class.ring-danger-500]="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched"
              placeholder="John"
              data-testid="firstName"
              aria-required="true"
              aria-describedby="firstName-error"
              [attr.aria-invalid]="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched"
            />
          </div>
          @if (registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched) {
            <p class="text-danger-500 text-xs mt-2 flex items-center gap-1 animate-fade-in" id="firstName-error" data-testid="firstName-error" role="alert">
              <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              @if (registerForm.get('firstName')?.errors?.['required']) {
                First name is required
              }
              @if (registerForm.get('firstName')?.errors?.['minlength']) {
                First name must be at least 2 characters
              }
            </p>
          }
        </div>

        <!-- Last Name -->
        <div class="mb-5">
          <label for="lastName" class="block text-sm font-medium text-gray-700 mb-2 font-body">
            Last Name <span class="text-danger-500">*</span>
          </label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
              </svg>
            </div>
            <input
              id="lastName"
              type="text"
              formControlName="lastName"
              class="w-full pl-10 pr-4 py-3 border-0 bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-300 focus:bg-white transition-all duration-200 font-body"
              [class.error-shake]="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched"
              [class.ring-2]="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched"
              [class.ring-danger-500]="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched"
              placeholder="Doe"
              data-testid="lastName"
              aria-required="true"
              aria-describedby="lastName-error"
              [attr.aria-invalid]="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched"
            />
          </div>
          @if (registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched) {
            <p class="text-danger-500 text-xs mt-2 flex items-center gap-1 animate-fade-in" id="lastName-error" data-testid="lastName-error" role="alert">
              <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              @if (registerForm.get('lastName')?.errors?.['required']) {
                Last name is required
              }
              @if (registerForm.get('lastName')?.errors?.['minlength']) {
                Last name must be at least 2 characters
              }
            </p>
          }
        </div>

        <!-- Email -->
        <div class="mb-5">
          <label for="email" class="block text-sm font-medium text-gray-700 mb-2 font-body">
            Email Address <span class="text-danger-500">*</span>
          </label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
            </div>
            <input
              id="email"
              type="email"
              formControlName="email"
              class="w-full pl-10 pr-4 py-3 border-0 bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-300 focus:bg-white transition-all duration-200 font-body"
              [class.error-shake]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
              [class.ring-2]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
              [class.ring-danger-500]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
              placeholder="owner@example.com"
              data-testid="email"
              aria-required="true"
              aria-describedby="email-error"
              [attr.aria-invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
            />
          </div>
          @if (registerForm.get('email')?.invalid && registerForm.get('email')?.touched) {
            <p class="text-danger-500 text-xs mt-2 flex items-center gap-1 animate-fade-in" id="email-error" data-testid="email-error" role="alert">
              <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              @if (registerForm.get('email')?.errors?.['required']) {
                Email is required
              }
              @if (registerForm.get('email')?.errors?.['email']) {
                Please enter a valid email address
              }
            </p>
          }
        </div>

        <!-- Phone -->
        <div class="mb-5">
          <label for="phone" class="block text-sm font-medium text-gray-700 mb-2 font-body">
            Phone Number <span class="text-danger-500">*</span>
          </label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
            </div>
            <input
              id="phone"
              type="tel"
              formControlName="phone"
              class="w-full pl-10 pr-4 py-3 border-0 bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-300 focus:bg-white transition-all duration-200 font-body"
              [class.error-shake]="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched"
              [class.ring-2]="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched"
              [class.ring-danger-500]="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched"
              placeholder="9876543210"
              data-testid="phone"
              aria-required="true"
              aria-describedby="phone-error"
              [attr.aria-invalid]="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched"
            />
          </div>
          @if (registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched) {
            <p class="text-danger-500 text-xs mt-2 flex items-center gap-1 animate-fade-in" id="phone-error" data-testid="phone-error" role="alert">
              <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              @if (registerForm.get('phone')?.errors?.['required']) {
                Phone number is required
              }
              @if (registerForm.get('phone')?.errors?.['pattern']) {
                Please enter a valid 10-digit phone number
              }
            </p>
          }
        </div>

        <!-- Business Name -->
        <div class="mb-5">
          <label for="businessName" class="block text-sm font-medium text-gray-700 mb-2 font-body">
            Business Name <span class="text-danger-500">*</span>
          </label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
              </svg>
            </div>
            <input
              id="businessName"
              type="text"
              formControlName="businessName"
              class="w-full pl-10 pr-4 py-3 border-0 bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-300 focus:bg-white transition-all duration-200 font-body"
              [class.error-shake]="registerForm.get('businessName')?.invalid && registerForm.get('businessName')?.touched"
              [class.ring-2]="registerForm.get('businessName')?.invalid && registerForm.get('businessName')?.touched"
              [class.ring-danger-500]="registerForm.get('businessName')?.invalid && registerForm.get('businessName')?.touched"
              placeholder="Study Hub Pvt Ltd"
              data-testid="businessName"
              aria-required="true"
              aria-describedby="businessName-error"
              [attr.aria-invalid]="registerForm.get('businessName')?.invalid && registerForm.get('businessName')?.touched"
            />
          </div>
          @if (registerForm.get('businessName')?.invalid && registerForm.get('businessName')?.touched) {
            <p class="text-danger-500 text-xs mt-2 flex items-center gap-1 animate-fade-in" id="businessName-error" data-testid="businessName-error" role="alert">
              <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              @if (registerForm.get('businessName')?.errors?.['required']) {
                Business name is required
              }
              @if (registerForm.get('businessName')?.errors?.['minlength']) {
                Business name must be at least 3 characters
              }
            </p>
          }
        </div>

        <!-- Password -->
        <div class="mb-5">
          <label for="password" class="block text-sm font-medium text-gray-700 mb-2 font-body">
            Password <span class="text-danger-500">*</span>
          </label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
              </svg>
            </div>
            <input
              id="password"
              [type]="showPassword() ? 'text' : 'password'"
              formControlName="password"
              class="w-full pl-10 pr-12 py-3 border-0 bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-300 focus:bg-white transition-all duration-200 font-body"
              [class.error-shake]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
              [class.ring-2]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
              [class.ring-danger-500]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
              placeholder="••••••••"
              data-testid="password"
              aria-required="true"
              aria-describedby="password-error password-strength"
              [attr.aria-invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
            />
            <button
              type="button"
              (click)="togglePasswordVisibility()"
              class="absolute right-3 top-3 text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1"
              aria-label="Toggle password visibility"
            >
              @if (showPassword()) {
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                </svg>
              } @else {
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>
                </svg>
              }
            </button>
          </div>

          <!-- Enhanced Password Strength Indicator -->
          @if (registerForm.get('password')?.value) {
            <div class="mt-3" id="password-strength" data-testid="password-strength" [attr.data-strength]="passwordStrength()">
              <div class="flex items-center gap-3 mb-2">
                <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden relative">
                  <div
                    [ngClass]="{
                      'bg-gradient-to-r from-danger-500 to-danger-600': passwordStrength() === 'weak',
                      'bg-gradient-to-r from-warning-500 to-warning-600': passwordStrength() === 'medium',
                      'bg-gradient-to-r from-success-500 to-success-600': passwordStrength() === 'strong'
                    }"
                    [ngStyle]="{'width': passwordStrength() === 'weak' ? '33%' : passwordStrength() === 'medium' ? '66%' : '100%'}"
                    class="h-full transition-all duration-500 ease-in-out shadow-inner"
                  ></div>
                </div>
                <span
                  [ngClass]="{
                    'text-danger-600': passwordStrength() === 'weak',
                    'text-warning-600': passwordStrength() === 'medium',
                    'text-success-600': passwordStrength() === 'strong'
                  }"
                  class="text-xs font-medium min-w-[70px] font-body"
                >
                  {{ passwordStrengthText }}
                </span>
              </div>
            </div>
          }

          @if (registerForm.get('password')?.invalid && registerForm.get('password')?.touched) {
            <p class="text-danger-500 text-xs mt-2 animate-fade-in" id="password-error" data-testid="password-error" role="alert">
              @if (registerForm.get('password')?.errors?.['required']) {
                <span class="flex items-center gap-1">
                  <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  Password is required
                </span>
              }
              @if (registerForm.get('password')?.errors?.['passwordStrength']) {
                <span class="block mb-1">Password must contain:</span>
                <ul class="space-y-1 ml-5">
                  @if (!registerForm.get('password')?.errors?.['passwordStrength']?.['isLengthValid']) {
                    <li class="flex items-center gap-1">
                      <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                      </svg>
                      At least 8 characters
                    </li>
                  }
                  @if (!registerForm.get('password')?.errors?.['passwordStrength']?.['hasUpperCase']) {
                    <li class="flex items-center gap-1">
                      <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                      </svg>
                      One uppercase letter
                    </li>
                  }
                  @if (!registerForm.get('password')?.errors?.['passwordStrength']?.['hasLowerCase']) {
                    <li class="flex items-center gap-1">
                      <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                      </svg>
                      One lowercase letter
                    </li>
                  }
                  @if (!registerForm.get('password')?.errors?.['passwordStrength']?.['hasNumber']) {
                    <li class="flex items-center gap-1">
                      <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                      </svg>
                      One number
                    </li>
                  }
                  @if (!registerForm.get('password')?.errors?.['passwordStrength']?.['hasSpecialChar']) {
                    <li class="flex items-center gap-1">
                      <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                      </svg>
                      One special character
                    </li>
                  }
                </ul>
              }
            </p>
          }
        </div>

        <!-- Confirm Password -->
        <div class="mb-6">
          <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-2 font-body">
            Confirm Password <span class="text-danger-500">*</span>
          </label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
              </svg>
            </div>
            <input
              id="confirmPassword"
              [type]="showConfirmPassword() ? 'text' : 'password'"
              formControlName="confirmPassword"
              class="w-full pl-10 pr-12 py-3 border-0 bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-300 focus:bg-white transition-all duration-200 font-body"
              [class.error-shake]="(registerForm.get('confirmPassword')?.invalid || registerForm.errors?.['passwordMismatch']) && registerForm.get('confirmPassword')?.touched"
              [class.ring-2]="(registerForm.get('confirmPassword')?.invalid || registerForm.errors?.['passwordMismatch']) && registerForm.get('confirmPassword')?.touched"
              [class.ring-danger-500]="(registerForm.get('confirmPassword')?.invalid || registerForm.errors?.['passwordMismatch']) && registerForm.get('confirmPassword')?.touched"
              placeholder="••••••••"
              data-testid="confirmPassword"
              aria-required="true"
              aria-describedby="confirmPassword-error"
              [attr.aria-invalid]="(registerForm.get('confirmPassword')?.invalid || registerForm.errors?.['passwordMismatch']) && registerForm.get('confirmPassword')?.touched"
            />
            <button
              type="button"
              (click)="toggleConfirmPasswordVisibility()"
              class="absolute right-3 top-3 text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1"
              aria-label="Toggle confirm password visibility"
            >
              @if (showConfirmPassword()) {
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                </svg>
              } @else {
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>
                </svg>
              }
            </button>
          </div>
          @if ((registerForm.get('confirmPassword')?.invalid || registerForm.errors?.['passwordMismatch']) && registerForm.get('confirmPassword')?.touched) {
            <p class="text-danger-500 text-xs mt-2 flex items-center gap-1 animate-fade-in" id="confirmPassword-error" data-testid="confirmPassword-error" role="alert">
              <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              @if (registerForm.get('confirmPassword')?.errors?.['required']) {
                Please confirm your password
              }
              @if (registerForm.errors?.['passwordMismatch']) {
                Passwords do not match
              }
            </p>
          }
        </div>

        <!-- Terms & Conditions -->
        <div class="mb-6">
          <label class="flex items-start gap-3 cursor-pointer group">
            <input
              id="termsAccepted"
              type="checkbox"
              formControlName="termsAccepted"
              class="mt-0.5"
              data-testid="termsAccepted"
              aria-required="true"
              aria-describedby="terms-error"
            />
            <span class="text-sm text-gray-700 font-body">
              I agree to the <a href="/terms" class="text-primary-500 hover:text-primary-600 font-medium transition-colors">Terms & Conditions</a> and <a href="/privacy" class="text-primary-500 hover:text-primary-600 font-medium transition-colors">Privacy Policy</a>
              <span class="text-danger-500">*</span>
            </span>
          </label>
          @if (registerForm.get('termsAccepted')?.invalid && registerForm.get('termsAccepted')?.touched) {
            <p class="text-danger-500 text-xs mt-2 flex items-center gap-1 animate-fade-in" id="terms-error" data-testid="terms-error" role="alert">
              <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              You must accept the terms and conditions
            </p>
          }
        </div>

        <!-- Submit Button with Airbnb Gradient -->
        <button
          type="submit"
          [disabled]="isLoading()"
          class="w-full py-4 px-6 rounded-lg text-white font-semibold text-base disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 font-body motion-reduce:transition-none"
          data-testid="register-button"
          [attr.aria-busy]="isLoading()"
        >
          @if (isLoading()) {
            <span class="inline-flex items-center justify-center">
              <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              Creating Account...
            </span>
          } @else {
            Sign Up
          }
        </button>
      </form>

      <!-- Login Link -->
      <div class="mt-8 text-center text-sm text-gray-600 font-body">
        Already have an account?
        <a routerLink="/auth/login" class="text-primary-500 hover:text-primary-600 font-medium ml-1 transition-colors">
          Log in
        </a>
      </div>
    </div>
  </div>
</div>
