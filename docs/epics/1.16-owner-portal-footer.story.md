# Story 1.16: Owner Portal Footer Component

## Story Metadata

| Field | Value |
|-------|-------|
| **Story ID** | 1.16 |
| **Title** | Owner Portal Footer Component |
| **Epic** | Epic-1 - Owner Dashboard & Analytics |
| **Feature** | Feature 1.5 - Owner Portal Infrastructure |
| **Priority** | Medium |
| **Story Points** | 2 |
| **Status** | Ready for Development |
| **Dependencies** | Story 1.17 (Layout Shell for integration) |

---

## User Story

**As an** Owner,
**I want** a footer with application information
**so that** I can access help resources, legal information, and support links.

---

## Context & Background

The Owner Portal needs a consistent footer that provides:
- Application branding and version information
- Links to legal documents (Terms, Privacy Policy)
- Access to support and help resources
- Consistent placement across all Owner pages

This component will be integrated into the Layout Shell (Story 1.17) and remain visible at the bottom of all Owner Portal pages.

---

## Acceptance Criteria

### AC1: Footer Structure & Content
- [ ] Footer displays the following elements:
  - **Left section:** © 2025 StudyMate | Version 1.0.0
  - **Center section:** Links (Terms of Service, Privacy Policy, Contact Support)
  - **Right section:** Social media icons (optional) or additional branding
- [ ] Footer height: 60px (standard footer height)
- [ ] Footer background: neutral color (gray-100 or gray-800 based on theme)
- [ ] All text properly sized and readable

### AC2: Footer Links
- [ ] **Terms of Service** link navigates to `/terms` (opens in new tab)
- [ ] **Privacy Policy** link navigates to `/privacy` (opens in new tab)
- [ ] **Contact Support** link navigates to `/support` or `/owner/contact`
- [ ] All external links have `target="_blank"` and `rel="noopener noreferrer"`
- [ ] Links have hover states showing interactivity

### AC3: Sticky Footer Behavior
- [ ] Footer stays at bottom of viewport when content is short
- [ ] Footer pushes below fold when content is long (scroll to see)
- [ ] Uses CSS flexbox or grid for proper sticky behavior
- [ ] No overlap with page content
- [ ] Works correctly with dynamic content height

### AC4: Responsive Design
- [ ] **Desktop (≥1024px):** Horizontal layout with all sections visible
- [ ] **Tablet (768px-1023px):** Horizontal layout with compact spacing
- [ ] **Mobile (<768px):** Stacked vertical layout or single line with key links
- [ ] Text remains readable at all breakpoints
- [ ] Links remain accessible and clickable

### AC5: Version Display
- [ ] Application version dynamically pulled from `package.json` or environment
- [ ] Format: "Version X.Y.Z" or "v1.0.0"
- [ ] Version number automatically updated on build/deployment

### AC6: Copyright Year
- [ ] Copyright year dynamically generated (current year)
- [ ] Format: "© 2025 StudyMate" (updates automatically each year)

---

## Tasks / Subtasks

- [ ] Task 1: Create footer component structure (AC: 1, 3)
  - [ ] Generate `owner-footer` component using Angular CLI
  - [ ] Set up component as standalone with required imports
  - [ ] Create component files (.ts, .html, .scss, .spec.ts)
  - [ ] Configure component selector and metadata

- [ ] Task 2: Implement footer layout and content (AC: 1, 5, 6)
  - [ ] Create three-section footer layout (left, center, right)
  - [ ] Add copyright notice to left section (dynamic year)
  - [ ] Add version display to left section (from environment)
  - [ ] Add footer links to center section
  - [ ] Add branding/social links to right section
  - [ ] Apply Tailwind CSS for styling

- [ ] Task 3: Implement footer links (AC: 2)
  - [ ] Create footer links array with paths
  - [ ] Add Terms of Service link (external)
  - [ ] Add Privacy Policy link (external)
  - [ ] Add Contact Support link (internal)
  - [ ] Configure target="_blank" for external links
  - [ ] Add rel="noopener noreferrer" for security
  - [ ] Style links with hover states

- [ ] Task 4: Implement dynamic version display (AC: 5)
  - [ ] Import environment configuration
  - [ ] Extract version from environment.version
  - [ ] Display version in "Version X.Y.Z" format
  - [ ] Verify version updates on build

- [ ] Task 5: Implement sticky footer behavior (AC: 3)
  - [ ] Configure parent layout with flexbox
  - [ ] Set main content to flex-1
  - [ ] Test with short content (footer at bottom)
  - [ ] Test with long content (footer below fold)
  - [ ] Verify no content overlap

- [ ] Task 6: Implement responsive design (AC: 4)
  - [ ] Create desktop layout (≥1024px) - horizontal
  - [ ] Create tablet layout (768px-1023px) - compact horizontal
  - [ ] Create mobile layout (<768px) - stacked vertical
  - [ ] Test all breakpoints

- [ ] Task 7: Implement unit tests (AC: All)
  - [ ] Test current year displays in copyright
  - [ ] Test app version displays
  - [ ] Test all footer links render
  - [ ] Test external links have target="_blank"
  - [ ] Test rel="noopener noreferrer" on external links
  - [ ] Achieve 90%+ code coverage

- [ ] Task 8: Implement Playwright E2E tests (AC: All)
  - [ ] Test footer displays on all Owner Portal pages
  - [ ] Test all footer links present and visible
  - [ ] Test current year displays
  - [ ] Test sticky footer with short content
  - [ ] Test responsive behavior at 3 breakpoints
  - [ ] Verify zero console errors

- [ ] Task 9: Integration and polish (AC: All)
  - [ ] Integrate with Layout Shell (Story 1.17)
  - [ ] Verify sticky footer CSS works in layout
  - [ ] Polish styling and spacing
  - [ ] Code review and fixes
  - [ ] Documentation updates

---

## Technical Implementation Notes

### Component Structure

**File:** `src/app/owner/components/owner-footer/owner-footer.component.ts`

```typescript
import { Component, signal } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RouterLink } from '@angular/router';
import { environment } from '@env/environment';

@Component({
  selector: 'app-owner-footer',
  standalone: true,
  imports: [CommonModule, RouterLink],
  templateUrl: './owner-footer.component.html',
  styleUrls: ['./owner-footer.component.scss']
})
export class OwnerFooterComponent {
  currentYear = new Date().getFullYear();
  appVersion = environment.version || '1.0.0';

  footerLinks = [
    { label: 'Terms of Service', path: '/terms', external: true },
    { label: 'Privacy Policy', path: '/privacy', external: true },
    { label: 'Contact Support', path: '/owner/contact', external: false }
  ];
}
```

### Template (Tailwind CSS)

```html
<footer class="bg-gray-100 border-t border-gray-300 py-4">
  <div class="container mx-auto px-6">
    <div class="flex flex-col md:flex-row items-center justify-between gap-4">
      <!-- Left: Copyright & Version -->
      <div class="text-sm text-gray-600">
        © {{ currentYear }} StudyMate | Version {{ appVersion }}
      </div>

      <!-- Center: Links -->
      <div class="flex items-center gap-6">
        @for (link of footerLinks; track link.path) {
          <a
            [routerLink]="link.external ? null : link.path"
            [href]="link.external ? link.path : null"
            [target]="link.external ? '_blank' : '_self'"
            [rel]="link.external ? 'noopener noreferrer' : null"
            class="text-sm text-gray-700 hover:text-primary-600 transition-colors">
            {{ link.label }}
          </a>
        }
      </div>

      <!-- Right: Additional branding or social links -->
      <div class="text-sm text-gray-600">
        Built with ❤️ for educators
      </div>
    </div>
  </div>
</footer>
```

### Sticky Footer CSS (Tailwind)

In parent layout component:
```html
<div class="min-h-screen flex flex-col">
  <app-owner-header></app-owner-header>

  <main class="flex-1">
    <router-outlet></router-outlet>
  </main>

  <app-owner-footer></app-owner-footer>
</div>
```

### Environment Configuration

**File:** `src/environments/environment.ts`

```typescript
export const environment = {
  production: false,
  version: '1.0.0', // Auto-injected from package.json during build
  apiUrl: 'http://localhost:8080/api'
};
```

---

## Testing Requirements

### Unit Tests (Jasmine/Karma)

**File:** `owner-footer.component.spec.ts`

```typescript
describe('OwnerFooterComponent', () => {
  it('should display current year in copyright', () => {
    const currentYear = new Date().getFullYear();
    expect(fixture.nativeElement.textContent).toContain(currentYear.toString());
  });

  it('should display app version', () => {
    expect(fixture.nativeElement.textContent).toContain('Version');
  });

  it('should render all footer links', () => {
    const links = fixture.nativeElement.querySelectorAll('a');
    expect(links.length).toBe(3);
  });

  it('should add target="_blank" to external links', () => {
    const externalLinks = fixture.nativeElement.querySelectorAll('a[target="_blank"]');
    expect(externalLinks.length).toBeGreaterThan(0);
  });
});
```

### Playwright E2E Tests

**File:** `e2e/owner-footer.spec.ts`

```typescript
test.describe('Owner Footer', () => {
  test.beforeEach(async ({ page }) => {
    await loginAsOwner(page);
    await page.goto('/owner/dashboard');
  });

  test('should display footer with all elements', async ({ page }) => {
    await expect(page.locator('footer')).toBeVisible();
    await expect(page.locator('footer')).toContainText('StudyMate');
    await expect(page.locator('footer')).toContainText('Version');
  });

  test('should have all footer links', async ({ page }) => {
    await expect(page.locator('footer a:has-text("Terms of Service")')).toBeVisible();
    await expect(page.locator('footer a:has-text("Privacy Policy")')).toBeVisible();
    await expect(page.locator('footer a:has-text("Contact Support")')).toBeVisible();
  });

  test('should display current year', async ({ page }) => {
    const currentYear = new Date().getFullYear().toString();
    await expect(page.locator('footer')).toContainText(currentYear);
  });

  test('should stick to bottom with short content', async ({ page }) => {
    // Navigate to page with minimal content
    const footer = page.locator('footer');
    const footerBox = await footer.boundingBox();
    const viewportHeight = page.viewportSize().height;

    // Footer should be at or near bottom of viewport
    expect(footerBox.y + footerBox.height).toBeGreaterThanOrEqual(viewportHeight - 10);
  });

  test('should work responsively', async ({ page }) => {
    // Mobile
    await page.setViewportSize({ width: 375, height: 667 });
    await expect(page.locator('footer')).toBeVisible();

    // Tablet
    await page.setViewportSize({ width: 768, height: 1024 });
    await expect(page.locator('footer')).toBeVisible();

    // Desktop
    await page.setViewportSize({ width: 1440, height: 900 });
    await expect(page.locator('footer')).toBeVisible();
  });

  test('should have zero console errors', async ({ page }) => {
    const errors = [];
    page.on('console', msg => {
      if (msg.type() === 'error') errors.push(msg.text());
    });

    await page.goto('/owner/dashboard');
    expect(errors).toEqual([]);
  });
});
```

### Responsive Testing

Test at these breakpoints:
- [ ] Mobile: 375px (iPhone SE)
- [ ] Tablet: 768px (iPad)
- [ ] Desktop: 1024px (Standard laptop)

---

## Definition of Done

### Implementation
- [ ] Component created with all acceptance criteria met
- [ ] All footer links functional
- [ ] Sticky footer behavior working
- [ ] Responsive design validated

### Testing
- [ ] Unit tests passing (90%+ code coverage)
- [ ] Playwright E2E tests passing
- [ ] Tested in Chrome, Firefox, Safari
- [ ] Zero browser console errors/warnings

### Code Quality
- [ ] Code reviewed and approved
- [ ] Follows Angular 20 coding standards
- [ ] Tailwind CSS used for all styling
- [ ] Proper TypeScript typing

### Documentation
- [ ] Component documented with JSDoc comments
- [ ] Integration with Layout Shell documented

---

## References

- **Context7 MCP Query:** `"use context7 - Angular 20 standalone components"`
- **Coding Standards:** [docs/guidelines/coding-standard-guidelines/angular-rules.md](../guidelines/coding-standard-guidelines/angular-rules.md)
- **UI/UX Standards:** [docs/guidelines/coding-standard-guidelines/ui-ux-design-best-practices.md](../guidelines/coding-standard-guidelines/ui-ux-design-best-practices.md)

---

## Estimated Effort

| Task | Estimated Time |
|------|----------------|
| Component implementation | 2 hours |
| Responsive design | 1 hour |
| Unit tests | 1 hour |
| Playwright E2E tests | 1 hour |
| Styling & polish | 1 hour |
| Code review & fixes | 1 hour |
| **Total** | **~7 hours (2 SP)** |

---

## Story Completion Checklist

- [ ] All acceptance criteria met (AC1-AC6)
- [ ] Component implemented and functional
- [ ] All tests passing (unit + E2E)
- [ ] Responsive design validated
- [ ] Code reviewed and approved
- [ ] Zero console errors/warnings
- [ ] Ready for integration in Story 1.17

---

**Status:** Ready for Development
**Can Run in Parallel With:** Story 1.15 (Header Component)
**Next:** Story 1.17 (Layout Shell - integrates both header and footer)

---

## Dev Notes

### Previous Story Insights

**Story 1.15** (Header) provides consistent patterns to follow:
- Standalone component architecture
- Tailwind CSS for all styling
- Responsive design at standard breakpoints
- Router test utilities for unit tests

**Story 1.14a** established Router test utilities:
- Use `provideRouterMock()` for unit tests
- Standardized testing configurations

**Key Learning:** Footer is infrastructure component - simple but must be consistent across all pages.

### Architecture Overview

[Source: docs/architecture/studymate-system-architecture-blueprint.md#1-technology-stack--environment]
- **Frontend**: Angular 20 with TypeScript, Signals, Standalone components
- **Styling**: Tailwind CSS (utility-first CSS framework)
- **Build**: Version injection from package.json via environment

### Angular Development Standards

[Source: docs/guidelines/coding-standard-guidelines/angular-rules.md]
- Use standalone components with minimal dependencies
- Follow kebab-case naming for files (e.g., `owner-footer.component.ts`)
- Use 2-space indentation and single quotes for strings
- Import order: Angular core → Common → Router → Environment → Relative paths

### UI/UX Design Standards

[Source: docs/guidelines/coding-standard-guidelines/ui-ux-design-best-practices.md]
- **Footer Height**: 60px (standard footer height)
- **Background Color**: Neutral gray (gray-100 or gray-800 based on theme)
- **Border**: Top border for visual separation
- **Link Styling**:
  - Default: Text color with subtle contrast
  - Hover: Primary brand color with transition
- **Typography**: Small text (text-sm) for footer content

### Sticky Footer Pattern

**CSS Strategy:**
```html
<div class="min-h-screen flex flex-col">
  <app-owner-header></app-owner-header>
  <main class="flex-1">Content</main>
  <app-owner-footer></app-owner-footer>
</div>
```

- Parent container: `min-h-screen flex flex-col`
- Main content: `flex-1` (expands to fill space)
- Footer: Natural height, sticks to bottom

### File Locations

**Component Files:**
- `studymate-frontend/src/app/owner/components/owner-footer/owner-footer.component.ts`
- `studymate-frontend/src/app/owner/components/owner-footer/owner-footer.component.html`
- `studymate-frontend/src/app/owner/components/owner-footer/owner-footer.component.scss`
- `studymate-frontend/src/app/owner/components/owner-footer/owner-footer.component.spec.ts`

**Environment Configuration:**
- `studymate-frontend/src/environments/environment.ts`
- `studymate-frontend/src/environments/environment.prod.ts`

**Test Files:**
- `studymate-frontend/e2e/owner-footer.spec.ts`

### Version Management

**Environment Configuration:**
```typescript
export const environment = {
  production: false,
  version: '1.0.0', // Auto-injected from package.json during build
  apiUrl: 'http://localhost:8080/api'
};
```

**Build Script** (in package.json):
- Version should be automatically read from package.json
- Injected into environment.ts during build process
- Alternative: Use Angular's `@angular/cli` version replacement

### Testing Requirements

[Source: docs/architecture/studymate-system-architecture-blueprint.md#5-testing-architecture--quality-assurance]

#### Unit Testing
- **Framework**: Jasmine/Karma
- **Pattern**: Arrange-Act-Assert
- **Coverage**: 90%+ required
- **Focus**: Dynamic year, version display, link rendering

#### End-to-End Testing
- **Framework**: Playwright
- **Requirements**:
  - Footer visible on all Owner Portal pages
  - Sticky footer behavior validated
  - Responsive design tested
  - Zero console errors
- **Location**: `studymate-frontend/e2e/owner-footer.spec.ts`

### Technical Constraints

- **Performance**: Footer must render within 50ms
- **Responsive Breakpoints**:
  - Mobile: <768px (stacked vertical)
  - Tablet: 768px-1023px (compact horizontal)
  - Desktop: ≥1024px (full horizontal)
- **Browser Support**: Chrome, Firefox, Safari (latest 2 versions)

### context7 MCP Integration (MANDATORY)

[Source: docs/architecture/studymate-system-architecture-blueprint.md#context7-mcp-integration-mandatory]
- **Pre-Implementation**: Consult context7 for Angular 20 best practices
- **Required Query**: `"use context7 - Angular 20 standalone components"`
- **Usage**: Verify component patterns against official documentation

### Integration Notes

**Story 1.17 Integration:**
- This component will be imported into Layout Shell (Story 1.17)
- Footer must be standalone and independently testable
- No dependencies on Layout Shell for testing
- Works with Header (Story 1.15) in Layout Shell flex container

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-12 | 1.0 | Story created for Owner Portal Footer Component | Bob (Scrum Master) |
| 2025-10-12 | 1.1 | Added Tasks/Subtasks and Dev Notes sections | Bob (Scrum Master) |

---

## Dev Agent Record

### Agent Model Used
_To be filled by Dev Agent_

### Debug Log References
_To be filled by Dev Agent_

### Completion Notes List
_To be filled by Dev Agent during implementation:_
- Document sticky footer CSS approach
- Note version injection mechanism
- Describe responsive design decisions
- List any environment configuration changes
- Note any deviations from technical specs

### File List

**Files to Create:**
- `studymate-frontend/src/app/owner/components/owner-footer/owner-footer.component.ts`
- `studymate-frontend/src/app/owner/components/owner-footer/owner-footer.component.html`
- `studymate-frontend/src/app/owner/components/owner-footer/owner-footer.component.scss`
- `studymate-frontend/src/app/owner/components/owner-footer/owner-footer.component.spec.ts`
- `studymate-frontend/e2e/owner-footer.spec.ts`

**Files to Modify:**
- `studymate-frontend/src/environments/environment.ts` (verify version field exists)
- `studymate-frontend/src/environments/environment.prod.ts` (verify version field exists)

**Configuration Files:**
- `studymate-frontend/package.json` (version source)

---

## QA Results

_To be filled by QA Agent_
