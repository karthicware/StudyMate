# Story 0.9: Configure Application Properties

## Status
Draft

## Story
**As a** Developer,
**I want** application properties configured for all environments,
**so that** I can manage configuration for development, testing, and production separately.

## Acceptance Criteria
1. application.properties configured for all common settings
2. application-dev.properties created for local development
3. application-test.properties created for testing
4. application-prod.properties created for production
5. Environment-specific profiles working correctly
6. Sensitive properties externalized and documented

## Tasks / Subtasks
- [ ] Task 1: Configure base application.properties (AC: 1)
  - [ ] Set spring.application.name
  - [ ] Configure server settings (port, context-path)
  - [ ] Set active profile default to 'dev'
  - [ ] Configure logging levels
  - [ ] Add common JPA/Hibernate settings
- [ ] Task 2: Create application-dev.properties (AC: 2)
  - [ ] Set PostgreSQL database for local development
  - [ ] Enable detailed SQL logging
  - [ ] Disable security for easier development
  - [ ] Enable Hibernate DDL auto-update
  - [ ] Configure debug logging
- [ ] Task 3: Create application-test.properties (AC: 3)
  - [ ] Configure PostgreSQL database for tests
  - [ ] Set ddl-auto to create-drop for tests
  - [ ] Minimal logging for faster test execution
  - [ ] Disable unnecessary features
- [ ] Task 4: Create application-prod.properties (AC: 4)
  - [ ] Use environment variables for sensitive data
  - [ ] Enable production logging
  - [ ] Disable SQL logging
  - [ ] Set Hibernate to validate only
  - [ ] Configure error handling
- [ ] Task 5: Test profile activation (AC: 5)
  - [ ] Run with -Dspring.profiles.active=dev
  - [ ] Run with -Dspring.profiles.active=test
  - [ ] Verify correct properties loaded
  - [ ] Test environment variable substitution
- [ ] Task 6: Document configuration (AC: 6)
  - [ ] Create .env.example file
  - [ ] Document all environment variables
  - [ ] Add configuration guide to README
  - [ ] Document profile usage

## Dev Notes

### Previous Story Insights
**From Stories 0.6-0.8:** Application properties exist but not fully configured for all environments

### Profile-based Configuration
[Source: docs/guidelines/coding-standard-guidelines/java-spring-rules.md]
- Use Spring Profiles for environment-specific config
- Default to 'dev' profile for local development
- Use environment variables for sensitive data in production

### Complete Configuration Files

**application.properties** (base):
```properties
spring.application.name=studymate-backend
server.port=8080
spring.profiles.active=dev

logging.level.root=INFO
logging.level.com.studymate.backend=INFO
```

**application-dev.properties**:
```properties
# Database - PostgreSQL for local development
spring.datasource.url=jdbc:postgresql://localhost:5432/studymate_user
spring.datasource.username=studymate_user
spring.datasource.password=studymate_user
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Security - Disabled for development
spring.security.enabled=false

# Logging - Verbose for development
logging.level.com.studymate.backend=DEBUG
logging.level.org.springframework.security=DEBUG
```

**application-test.properties**:
```properties
# Database - PostgreSQL for testing
spring.datasource.url=jdbc:postgresql://localhost:5432/studymate_user
spring.datasource.username=studymate_user
spring.datasource.password=studymate_user
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Logging - Minimal for faster test execution
logging.level.root=WARN
logging.level.com.studymate.backend=INFO
```

**application-prod.properties**:
```properties
# Database - PostgreSQL from environment
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false

# Security
spring.security.enabled=true
```

### File Locations
- `src/main/resources/application.properties`
- `src/main/resources/application-dev.properties`
- `src/main/resources/application-test.properties`
- `src/main/resources/application-prod.properties`
- `.env.example` (project root)

## Testing
- Test each profile loads correctly
- Verify environment variable substitution

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-10 | 1.0 | Story created from Epic 0, Feature 0.2 | Bob (Scrum Master) |
| 2025-10-11 | 1.1 | Corrected H2 references to PostgreSQL (aligned with Architecture mandate) | Sarah (Product Owner) |

## Dev Agent Record
_To be filled by Dev Agent_

## QA Results
_To be filled by QA Agent_
